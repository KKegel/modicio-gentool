@*
* This file is part of the codi-insights software.
* Copyright (C) 2022 Karl Kegel
*
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU General Public License for more details.
*
* You should have received a copy of the GNU General Public License
* along with this program. If not, see <https://www.gnu.org/licenses/>.
* *@
@import views.html.forms.new_model_element_form
@import modicio.core.TypeHandle
@import modicio.core.TimeIdentity
@import views.html.helper.CSRF
@(types: Seq[TypeHandle], rootTime: TimeIdentity)(implicit request: RequestHeader, messagesProvider: MessagesProvider)

@app{
    <div class="full-width card shadowed m-b-small">
        <div class="p-t-small p-b-small p-r-medium p-l-medium">
            <a target="blank" href="@routes.ModelController.native()">View Native Model</a>
            <div class="flex-container bg-block-1 m-t-mini p-ltrb-mini">
                <div class="col-2"><b>Variant</b></div><div class="weight-2">@TimeIdentity.prettyPrintExtended(rootTime.variantTime)</div>
            </div>
            <div class="flex-container bg-block-1 m-t-mini p-ltrb-mini">
                <div class="col-2"><b>Running</b></div><div class="weight-2">@TimeIdentity.prettyPrintExtended(rootTime.runningTime)</div>
            </div>
            <div class="m-t-small">
            @helper.form(action = routes.ModelController.incrementVariant()) {
                @CSRF.formField
                <button class="btn btn-bordered-prim btn-large">Increment Variant</button>
            }
            </div>
        </div>
    </div>
    <div class="full-width card shadowed m-b-small">
        <div class="p-t-small p-b-small p-r-medium p-l-medium">
            <div class="headline-text m-b-small"><b>Abstract Model Classes</b></div>
                <div class="flex-container full-width stretched horizontal m-b-mini bg-sec fc-white p-t-mini p-b-mini">
                    <div class="m-l-small col-2"><b>Name</b></div>
                    <div class="weight-2"><b>Identity</b></div>
                    <div class="widget-large m-l-medium m-r-small">Action</div>
                </div>
                @for(handle <- types.filter(f => f.getIsTemplate)){
                    <div class="flex-container full-width stretched horizontal m-t-mini p-t-mini p-b-mini bg-lg">
                        <div class="m-l-small col-2">@handle.getTypeName</div>
                        <div class="weight-2"><b>[REFERENCE (#)]</b></div>
                        <div class="widget-large m-l-small m-r-small"><a href='@routes.ModelController.fragment(handle.getTypeName, "#")'>open</a></div>
                    </div>
                }
        </div>
    </div>

    <div class="full-width card shadowed m-b-small">
        <div class="p-t-small p-b-small p-r-medium p-l-medium">
            <div class="headline-text m-b-small"><b>Instantiable Model Classes</b></div>
            <div class="flex-container full-width stretched horizontal m-b-mini bg-sec fc-white p-t-mini p-b-mini">
                <div class="m-l-small col-2"><b>Name</b></div>
                <div class="weight-2"><b>Version</b></div>
                <div class="widget-large m-l-medium m-r-small">Action</div>
            </div>
            @for(handle <- types.filter(f => !f.getIsTemplate)){
                <div class="flex-container full-width stretched horizontal m-t-mini p-t-mini p-b-mini bg-lg">
                    <div class="m-l-small col-2">@handle.getTypeName</div>
                    <div class="weight-2"><b>[REFERENCE (#)]</b></div>
                    <div class="widget-large m-l-small m-r-small"><a href='@routes.ModelController.fragment(handle.getTypeName, "#")'>open</a></div>
                </div>
            }
        </div>
    </div>

    <div class="full-width card shadowed m-b-small">
        <div class="p-t-small p-b-small p-r-medium p-l-medium">
            <div class="headline-text m-b-small"><b>New Model Class</b></div>
            @new_model_element_form()
        </div>
    </div>
}("Model Overview")